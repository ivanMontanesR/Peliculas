<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Buscador de pel√≠culas y series en tiempo real con la API de OMDb"
    />
    <meta name="author" content="Iv√°n Monta√±√©s" />
    <title>Peliteca De Ivan - Buscador de Pel√≠culas</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
        color: #ffffff;
        min-height: 100vh;
        padding: 2rem;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
      }

      /* Header */
      .header {
        text-align: center;
        margin-bottom: 3rem;
        animation: fadeInDown 0.8s ease-out;
      }

      .header h1 {
        font-size: 3.5rem;
        background: linear-gradient(135deg, #e50914, #f40612);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 0.5rem;
      }

      .header p {
        color: #a0a0a0;
        font-size: 1.2rem;
      }

      /* Search Bar */
      .search-container {
        max-width: 700px;
        margin: 0 auto 3rem auto;
        animation: fadeInUp 0.8s ease-out 0.2s both;
      }

      .search-box {
        position: relative;
        display: flex;
        gap: 1rem;
      }

      .search-input {
        flex: 1;
        padding: 1.2rem 1.5rem;
        font-size: 1.1rem;
        background: rgba(30, 30, 30, 0.8);
        border: 2px solid rgba(229, 9, 20, 0.3);
        border-radius: 50px;
        color: white;
        transition: all 0.3s;
      }

      .search-input:focus {
        outline: none;
        border-color: #e50914;
        box-shadow: 0 0 20px rgba(229, 9, 20, 0.3);
      }

      .search-input::placeholder {
        color: #666;
      }

      .search-btn {
        padding: 1.2rem 2.5rem;
        font-size: 1.1rem;
        background: linear-gradient(135deg, #e50914, #f40612);
        border: none;
        border-radius: 50px;
        color: white;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        white-space: nowrap;
      }

      .search-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(229, 9, 20, 0.5);
      }

      .search-btn:active {
        transform: translateY(0);
      }

      .search-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      /* Loading */
      .loading {
        text-align: center;
        padding: 3rem;
        font-size: 1.5rem;
        color: #e50914;
        display: none;
      }

      .loading.active {
        display: block;
        animation: pulse 1.5s ease-in-out infinite;
      }

      /* Error Message */
      .error-message {
        text-align: center;
        padding: 2rem;
        background: rgba(229, 9, 20, 0.1);
        border: 1px solid rgba(229, 9, 20, 0.3);
        border-radius: 15px;
        margin-bottom: 2rem;
        display: none;
      }

      .error-message.active {
        display: block;
        animation: fadeInUp 0.5s ease-out;
      }

      .error-message p {
        color: #ff6b6b;
        font-size: 1.1rem;
      }

      /* Results Info */
      .results-info {
        text-align: center;
        margin-bottom: 2rem;
        color: #a0a0a0;
        font-size: 1.1rem;
        display: none;
      }

      .results-info.active {
        display: block;
        animation: fadeInUp 0.5s ease-out;
      }

      .results-info strong {
        color: #e50914;
      }

      /* Movies Grid */
      .movies-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 2rem;
        animation: fadeInUp 0.8s ease-out 0.4s both;
      }

      .movie-card {
        background: rgba(30, 30, 30, 0.6);
        border-radius: 15px;
        overflow: hidden;
        transition: all 0.3s;
        cursor: pointer;
        border: 1px solid rgba(229, 9, 20, 0.2);
        animation: fadeInUp 0.5s ease-out;
        position: relative;
      }

      .movie-card:hover {
        transform: translateY(-10px);
        border-color: #e50914;
        box-shadow: 0 20px 40px rgba(229, 9, 20, 0.3);
      }

      .movie-poster {
        width: 100%;
        height: 375px;
        object-fit: cover;
        background: #1a1a1a;
      }

      .movie-poster.placeholder {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
        color: #666;
        padding: 2rem 1rem;
        text-align: center;
      }

      .movie-info {
        padding: 1.5rem;
      }

      .movie-title {
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: #fff;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        min-height: 2.4rem;
      }

      .movie-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.8rem;
        color: #a0a0a0;
        font-size: 0.9rem;
      }

      .movie-year {
        color: #e50914;
        font-weight: 600;
      }

      .movie-type {
        display: inline-block;
        padding: 0.3rem 0.8rem;
        background: rgba(229, 9, 20, 0.1);
        border-radius: 20px;
        font-size: 0.85rem;
        color: #e50914;
        text-transform: capitalize;
      }

      /* Initial State */
      .initial-state {
        text-align: center;
        padding: 4rem 2rem;
        animation: fadeInUp 0.8s ease-out 0.6s both;
      }

      .initial-state .emoji {
        font-size: 5rem;
        margin-bottom: 1rem;
        animation: float 3s ease-in-out infinite;
      }

      .initial-state h2 {
        font-size: 2rem;
        margin-bottom: 1rem;
        color: #e50914;
      }

      .initial-state p {
        color: #a0a0a0;
        font-size: 1.1rem;
        max-width: 600px;
        margin: 0 auto;
      }

      /* Modal para detalles */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        z-index: 1000;
        animation: fadeIn 0.3s ease-out;
      }

      .modal.active {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem;
      }

      .modal-content {
        background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
        border-radius: 20px;
        max-width: 800px;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
        border: 2px solid rgba(229, 9, 20, 0.3);
        animation: slideUp 0.4s ease-out;
        position: relative;
      }

      .modal-close {
        position: absolute;
        top: 1.5rem;
        right: 1.5rem;
        background: rgba(229, 9, 20, 0.2);
        border: none;
        color: #e50914;
        font-size: 2rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.3s;
        line-height: 1;
      }

      .modal-close:hover {
        background: #e50914;
        color: white;
        transform: rotate(90deg);
      }

      .modal-poster {
        width: 100%;
        max-height: 400px;
        object-fit: cover;
        border-radius: 20px 20px 0 0;
      }

      .modal-info {
        padding: 2rem;
      }

      .modal-title {
        font-size: 2rem;
        margin-bottom: 1rem;
        color: #e50914;
      }

      .modal-meta {
        display: flex;
        gap: 1rem;
        margin-bottom: 1.5rem;
        flex-wrap: wrap;
      }

      .modal-tag {
        padding: 0.5rem 1rem;
        background: rgba(229, 9, 20, 0.1);
        border-radius: 20px;
        font-size: 0.9rem;
        color: #e50914;
      }

      .modal-section {
        margin-bottom: 1.5rem;
      }

      .modal-section h3 {
        color: #e50914;
        margin-bottom: 0.5rem;
        font-size: 1.2rem;
      }

      .modal-section p {
        color: #a0a0a0;
        line-height: 1.8;
      }

      /* Footer */
      .footer {
        text-align: center;
        margin-top: 4rem;
        padding-top: 2rem;
        border-top: 1px solid rgba(229, 9, 20, 0.2);
        color: #666;
      }

      .footer p {
        margin-bottom: 0.5rem;
      }

      .footer a {
        color: #e50914;
        text-decoration: none;
        transition: color 0.3s;
      }

      .footer a:hover {
        color: #f40612;
      }

      /* Animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes fadeInDown {
        from {
          opacity: 0;
          transform: translateY(-30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(50px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-20px);
        }
      }

      /* Responsive */
      @media (max-width: 768px) {
        body {
          padding: 1rem;
        }

        .header h1 {
          font-size: 2.5rem;
        }

        .header p {
          font-size: 1rem;
        }

        .search-box {
          flex-direction: column;
        }

        .search-btn {
          width: 100%;
        }

        .movies-grid {
          grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
          gap: 1rem;
        }

        .movie-poster {
          height: 225px;
        }

        .movie-info {
          padding: 1rem;
        }

        .movie-title {
          font-size: 1rem;
        }

        .initial-state .emoji {
          font-size: 3rem;
        }

        .initial-state h2 {
          font-size: 1.5rem;
        }

        .modal-content {
          margin: 1rem;
        }

        .modal-info {
          padding: 1.5rem;
        }

        .modal-title {
          font-size: 1.5rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <div class="header">
        <h1>üé¨ Peliteca De Ivan</h1>
        <p>Busca tus pel√≠culas favoritas al instante</p>
      </div>

      <!-- Search Bar -->
      <div class="search-container">
        <div class="search-box">
          <input
            type="text"
            class="search-input"
            id="searchInput"
            placeholder="Busca pel√≠culas, series... (ej: Matrix, Inception)"
            autocomplete="off"
          />
          <button class="search-btn" id="searchBtn">Buscar</button>
        </div>
      </div>

      <!-- Loading -->
      <div class="loading" id="loading">üé¨ Buscando pel√≠culas...</div>

      <!-- Error Message -->
      <div class="error-message" id="errorMessage">
        <p>üòï No se encontraron resultados. Intenta con otra b√∫squeda.</p>
      </div>

      <!-- Results Info -->
      <div class="results-info" id="resultsInfo"></div>

      <!-- Initial State -->
      <div class="initial-state" id="initialState">
        <div class="emoji">üçø</div>
        <h2>¬°Descubre el Cine!</h2>
        <p>
          Busca cualquier pel√≠cula o serie y obt√©n informaci√≥n detallada al
          instante. Prueba buscando "Avengers", "Breaking Bad" o tu favorita.
        </p>
      </div>

      <!-- Movies Grid -->
      <div class="movies-grid" id="moviesGrid"></div>

      <!-- Modal para detalles -->
      <div class="modal" id="modal">
        <div class="modal-content" id="modalContent">
          <button class="modal-close" id="modalClose">&times;</button>
          <!-- El contenido se genera din√°micamente con JavaScript -->
        </div>
      </div>

      <!-- Footer -->
      <div class="footer">
        <p>
          Desarrollado por
          <a href="https://free-lance-jade.vercel.app" target="_blank"
            >Iv√°n Monta√±√©s</a
          >
        </p>
        <p>API proporcionada por OMDb</p>
      </div>
    </div>

    <script>
      // ========================================
      // CONFIGURACI√ìN DE LA API
      // ========================================

      // CONSTANTES: Variables que NO cambian durante la ejecuci√≥n del programa
      // Se declaran con 'const' para evitar modificaciones accidentales

      // API Key de OMDb - Identificador √∫nico para acceder a la API
      // Esta key es personal y tiene un l√≠mite de 1000 peticiones diarias
      const API_KEY = "937459bc";

      // URL base de la API - Endpoint principal donde hacemos las peticiones
      const API_URL = "https://www.omdbapi.com/";

      // Tiempo de debounce en milisegundos (ms)
      // DEBOUNCE: T√©cnica para evitar ejecutar una funci√≥n demasiadas veces
      // Ejemplo: Si el usuario escribe r√°pido, esperamos a que termine antes de buscar
      const DEBOUNCE_DELAY = 500; // 0.5 segundos

      // ========================================
      // SELECCI√ìN DE ELEMENTOS DEL DOM
      // ========================================

      // DOM = Document Object Model (Modelo de Objeto del Documento)
      // Es la representaci√≥n en JavaScript de todos los elementos HTML de la p√°gina

      // getElementById(): Busca un elemento HTML por su atributo 'id'
      // Guardamos las referencias en variables para no buscarlos repetidamente (m√°s eficiente)

      const searchInput = document.getElementById("searchInput"); // Campo de texto donde escribe el usuario
      const searchBtn = document.getElementById("searchBtn"); // Bot√≥n "Buscar"
      const moviesGrid = document.getElementById("moviesGrid"); // Contenedor donde aparecen las pel√≠culas
      const loading = document.getElementById("loading"); // Indicador de "Cargando..."
      const errorMessage = document.getElementById("errorMessage"); // Mensaje de error
      const initialState = document.getElementById("initialState"); // Estado inicial (antes de buscar)
      const resultsInfo = document.getElementById("resultsInfo"); // Informaci√≥n de resultados
      const modal = document.getElementById("modal"); // Modal (ventana emergente)
      const modalContent = document.getElementById("modalContent"); // Contenido del modal
      const modalClose = document.getElementById("modalClose"); // Bot√≥n cerrar modal

      // ========================================
      // VARIABLES DE ESTADO
      // ========================================

      // Variables que cambian durante la ejecuci√≥n del programa
      // Se declaran con 'let' porque sus valores pueden cambiar

      // Timeout ID para implementar debounce
      // TIMEOUT: Temporizador que ejecuta c√≥digo despu√©s de X tiempo
      let debounceTimer = null;

      // √öltima b√∫squeda realizada (para evitar b√∫squedas duplicadas)
      let lastSearch = "";

      // ========================================
      // EVENT LISTENERS (ESCUCHADORES DE EVENTOS)
      // ========================================

      // EVENT LISTENER: Funci√≥n que "escucha" cuando ocurre un evento (click, tecla, etc.)
      // SINTAXIS: elemento.addEventListener('tipoDeEvento', funcionAEjecutar)

      // 1. EVENTO: Click en el bot√≥n "Buscar"
      searchBtn.addEventListener("click", () => {
        // Arrow function () => es una forma moderna y compacta de escribir funciones
        // Equivale a: function() { searchMovies(); }
        searchMovies();
      });

      // 2. EVENTO: Presionar tecla en el input de b√∫squeda
      searchInput.addEventListener("keypress", (e) => {
        // 'e' (o 'event') es un OBJETO que contiene informaci√≥n sobre el evento
        // e.key contiene la tecla que se presion√≥

        if (e.key === "Enter") {
          // '===' compara valor Y tipo (m√°s estricto que '==')
          // Si la tecla presionada es Enter, ejecutamos la b√∫squeda
          searchMovies();
        }
      });

      // 3. EVENTO: Input en tiempo real (cada vez que cambia el texto)
      // MEJORA: B√∫squeda mientras escribes con debounce
      searchInput.addEventListener("input", (e) => {
        // Este evento se dispara cada vez que cambia el contenido del input

        // DEBOUNCE: Cancelamos el temporizador anterior si existe
        // clearTimeout() cancela un setTimeout() activo
        if (debounceTimer) {
          clearTimeout(debounceTimer);
        }

        // Creamos un nuevo temporizador
        // setTimeout(funci√≥n, milisegundos) ejecuta la funci√≥n despu√©s del tiempo especificado
        debounceTimer = setTimeout(() => {
          // Obtenemos el valor actual del input
          const query = e.target.value.trim();

          // Si hay al menos 3 caracteres, buscamos autom√°ticamente
          if (query.length >= 3) {
            searchMovies();
          }
        }, DEBOUNCE_DELAY);
      });

      // 4. EVENTO: Click en el bot√≥n de cerrar modal
      modalClose.addEventListener("click", closeModal);

      // 5. EVENTO: Click fuera del modal para cerrarlo
      modal.addEventListener("click", (e) => {
        // e.target es el elemento exacto donde se hizo click
        // Si se hace click en el fondo oscuro (no en el contenido), cerramos el modal
        if (e.target === modal) {
          closeModal();
        }
      });

      // 6. EVENTO: Tecla ESC para cerrar modal
      document.addEventListener("keydown", (e) => {
        // 'keydown' se dispara cuando se presiona cualquier tecla
        // Verificamos si el modal est√° abierto Y si la tecla es ESC
        if (modal.classList.contains("active") && e.key === "Escape") {
          closeModal();
        }
      });

      // ========================================
      // FUNCI√ìN PRINCIPAL: BUSCAR PEL√çCULAS
      // ========================================

      // ASYNC FUNCTION: Funci√≥n as√≠ncrona que puede "esperar" operaciones que toman tiempo
      // Permite usar 'await' dentro de ella para esperar Promesas
      async function searchMovies() {
        // .value obtiene el texto que hay dentro del input
        // .trim() elimina espacios en blanco al inicio y al final
        // Ejemplo: "  Matrix  " ‚Üí "Matrix"
        const query = searchInput.value.trim();

        // VALIDACI√ìN: Comprobamos que el usuario escribi√≥ algo
        if (query === "") {
          // Si est√° vac√≠o, mostramos error y SALIMOS de la funci√≥n
          showError("Por favor, escribe algo para buscar üé¨");
          return; // 'return' detiene la ejecuci√≥n aqu√≠
        }

        // OPTIMIZACI√ìN: Evitamos b√∫squedas duplicadas
        // Si la b√∫squeda es igual a la anterior, no hacemos nada
        if (query === lastSearch) {
          return;
        }

        // Guardamos la b√∫squeda actual
        lastSearch = query;

        // PREPARAR LA INTERFAZ: Mostramos feedback visual al usuario
        showLoading(); // Muestra "Buscando pel√≠culas..."
        hideError(); // Oculta mensajes de error previos
        hideInitialState(); // Oculta el estado inicial
        hideResultsInfo(); // Oculta info de resultados anterior
        searchBtn.disabled = true; // Deshabilitamos el bot√≥n mientras busca

        // TRY-CATCH: Manejo de errores
        // TRY: Intenta ejecutar c√≥digo que puede fallar
        // CATCH: Si algo falla, captura el error y lo maneja
        try {
          // ===== PETICI√ìN HTTP A LA API =====

          // FETCH API: Funci√≥n moderna de JavaScript para hacer peticiones HTTP
          // fetch() devuelve una PROMESA que se resuelve cuando llega la respuesta

          // TEMPLATE LITERALS: Strings con backticks `` que permiten insertar variables
          // ${variable} inserta el valor de una variable en el string
          const response = await fetch(
            `${API_URL}?apikey=${API_KEY}&s=${query}`
          );
          // AWAIT: "Espera" a que la promesa se resuelva antes de continuar
          // Sin await, el c√≥digo seguir√≠a ejecut√°ndose sin esperar la respuesta

          // URL completa generada ejemplo:
          // https://www.omdbapi.com/?apikey=937459bc&s=Matrix
          // Par√°metros:
          //   - apikey: Tu clave de API
          //   - s: Search (b√∫squeda) con el t√©rmino que escribi√≥ el usuario

          // .json() convierte la respuesta de texto a un objeto JavaScript
          // Tambi√©n devuelve una Promesa, por eso usamos await de nuevo
          const data = await response.json();

          // ESTRUCTURA DEL OBJETO 'data' que devuelve la API:
          // {
          //   Response: "True" o "False",
          //   Search: [ array de pel√≠culas ],
          //   totalResults: "n√∫mero",
          //   Error: "mensaje si hay error"
          // }

          // Ocultamos el loading y habilitamos el bot√≥n
          hideLoading();
          searchBtn.disabled = false;

          // ===== PROCESAMIENTO DE LA RESPUESTA =====

          // Verificamos si la API encontr√≥ resultados
          // La API devuelve Response: "True" (string) si hay resultados
          if (data.Response === "True") {
            // data.Search es un ARRAY con las pel√≠culas encontradas
            // Cada elemento del array es un objeto con: Title, Year, Poster, etc.
            displayMovies(data.Search);
            showResultsInfo(data.totalResults, query);
          } else {
            // Si no hay resultados, mostramos error
            // data.Error contiene el mensaje de error de la API
            showError(data.Error || "No se encontraron resultados");
            // OPERADOR ||: Si data.Error no existe, usa el mensaje por defecto

            moviesGrid.innerHTML = ""; // Limpiamos pel√≠culas anteriores
          }
        } catch (error) {
          // CATCH: Se ejecuta si hubo alg√∫n error en el bloque try
          // Posibles errores: sin internet, servidor ca√≠do, respuesta inv√°lida, etc.

          hideLoading();
          searchBtn.disabled = false;

          // Mostramos mensaje de error al usuario
          showError("Error al conectar con el servidor. Verifica tu conexi√≥n.");

          // CONSOLE: Objeto de JavaScript para mostrar mensajes en la consola del navegador
          // console.error() muestra errores en rojo (√∫til para debugging)
          console.error("Error en searchMovies():", error);
          // El objeto 'error' contiene informaci√≥n detallada sobre qu√© fall√≥
        }
      }

      // ========================================
      // FUNCI√ìN: MOSTRAR PEL√çCULAS EN LA CUADR√çCULA
      // ========================================

      function displayMovies(movies) {
        // PAR√ÅMETRO: 'movies' es un array con las pel√≠culas
        // Un ARRAY es una lista ordenada de elementos
        // Ejemplo: [{Title: "Matrix", Year: "1999"}, {Title: "Inception", Year: "2010"}]

        // Limpiamos el contenedor de pel√≠culas
        // innerHTML = '' vac√≠a todo el HTML interno del elemento
        moviesGrid.innerHTML = "";

        // FOREACH: M√©todo de arrays que ejecuta una funci√≥n para cada elemento
        // SINTAXIS: array.forEach((elemento, indice) => { c√≥digo })
        movies.forEach((movie, index) => {
          // 'movie': Pel√≠cula actual (objeto con propiedades Title, Year, Poster, etc.)
          // 'index': Posici√≥n en el array (0, 1, 2, 3...)

          // ===== CREAR TARJETA HTML DIN√ÅMICAMENTE =====

          // createElement(): Crea un elemento HTML nuevo (no visible a√∫n)
          const movieCard = document.createElement("div");
          // Esto crea: <div></div>

          // Asignamos clase CSS para darle estilo
          movieCard.className = "movie-card";
          // Ahora es: <div class="movie-card"></div>

          // Animaci√≥n escalonada: cada tarjeta aparece 0.1s despu√©s de la anterior
          // style.animationDelay accede directamente al CSS inline del elemento
          movieCard.style.animationDelay = `${index * 0.1}s`;
          // tarjeta 0: 0s, tarjeta 1: 0.1s, tarjeta 2: 0.2s, etc.

          // ===== MANEJO DEL P√ìSTER =====

          // OPERADOR TERNARIO: forma compacta de if-else
          // SINTAXIS: condici√≥n ? valorSiVerdadero : valorSiFalso
          const posterHTML =
            movie.Poster !== "N/A"
              ? `<img src="${movie.Poster}" alt="${movie.Title}" class="movie-poster">`
              : `<div class="movie-poster placeholder">
         <div style="font-size: 4rem; margin-bottom: 1rem;">üé¨</div>
         <div style="font-size: 0.9rem; color: #888;">Sin P√≥ster</div>
       </div>`;
          // Si no, mostramos un placeholder con emoji

          // ===== CONSTRUIR HTML COMPLETO DE LA TARJETA =====

          // innerHTML: Inserta HTML dentro del elemento
          // TEMPLATE LITERALS multil√≠nea permiten escribir HTML legible
          movieCard.innerHTML = `
                    ${posterHTML}
                    <div class="movie-info">
                        <h3 class="movie-title">${movie.Title}</h3>
                        <div class="movie-meta">
                            <span class="movie-year">${movie.Year}</span>
                            <span class="movie-type">${movie.Type}</span>
                        </div>
                    </div>
                `;
          // ${variable} inserta el valor de variables dentro del HTML

          // ===== EVENTO CLICK EN LA TARJETA =====

          movieCard.addEventListener("click", () =>
            showMovieDetails(movie.imdbID)
          );
          moviesGrid.appendChild(movieCard);
        });
      }

      async function showMovieDetails(imdbID) {
        try {
          modal.classList.add("active");
          modalContent.innerHTML = `
<button class="modal-close" id="modalCloseTemp">&times;</button>
<div style="padding: 4rem; text-align: center; color: #e50914;">
<div style="font-size: 3rem; margin-bottom: 1rem;">üé¨</div>
<div style="font-size: 1.2rem;">Cargando detalles...</div>
</div>
`;
          document
            .getElementById("modalCloseTemp")
            .addEventListener("click", closeModal);

          const response = await fetch(
            `${API_URL}?apikey=${API_KEY}&i=${imdbID}&plot=full`
          );
          const movie = await response.json();

          if (movie.Response === "True") {
            modalContent.innerHTML = `
<button class="modal-close" id="modalCloseNew">&times;</button>
${
  movie.Poster !== "N/A"
    ? `<img src="${movie.Poster}" alt="${movie.Title}" class="modal-poster">`
    : '<div style="padding: 2rem; text-align: center; font-size: 4rem;">üé¨</div>'
}
<div class="modal-info">
<h2 class="modal-title">${movie.Title}</h2>
<div class="modal-meta">
<span class="modal-tag">‚≠ê ${movie.imdbRating || "N/A"}/10</span>
<span class="modal-tag">üìÖ ${movie.Year}</span>
<span class="modal-tag">‚è±Ô∏è ${movie.Runtime || "N/A"}</span>
<span class="modal-tag">${movie.Type}</span>
</div>
${
  movie.Plot !== "N/A"
    ? `<div class="modal-section"><h3>üìù Sinopsis</h3><p>${movie.Plot}</p></div>`
    : ""
}
${
  movie.Genre !== "N/A"
    ? `<div class="modal-section"><h3>üé≠ G√©nero</h3><p>${movie.Genre}</p></div>`
    : ""
}
${
  movie.Director !== "N/A"
    ? `<div class="modal-section"><h3>üé¨ Director</h3><p>${movie.Director}</p></div>`
    : ""
}
${
  movie.Actors !== "N/A"
    ? `<div class="modal-section"><h3>üë• Actores</h3><p>${movie.Actors}</p></div>`
    : ""
}
${
  movie.Awards !== "N/A"
    ? `<div class="modal-section"><h3>üèÜ Premios</h3><p>${movie.Awards}</p></div>`
    : ""
}
</div>
`;
            document
              .getElementById("modalCloseNew")
              .addEventListener("click", closeModal);
          }
        } catch (error) {
          console.error("Error:", error);
        }
      }

      function closeModal() {
        modal.classList.remove("active");
      }

      function showLoading() {
        loading.classList.add("active");
      }

      function hideLoading() {
        loading.classList.remove("active");
      }

      function showError(message) {
        if (message) {
          errorMessage.querySelector("p").textContent = message;
        }
        errorMessage.classList.add("active");
      }

      function hideError() {
        errorMessage.classList.remove("active");
      }

      function hideInitialState() {
        initialState.style.display = "none";
      }

      function showResultsInfo(total, query) {
        resultsInfo.innerHTML = `Se encontraron <strong>${total}</strong> resultados para "${query}"`;
        resultsInfo.classList.add("active");
      }

      function hideResultsInfo() {
        resultsInfo.classList.remove("active");
      }

      document.addEventListener("DOMContentLoaded", () => {
        searchInput.focus();
      });
    </script>
  </body>
</html>
